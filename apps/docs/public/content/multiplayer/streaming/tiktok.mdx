---
title: TikTok Live Integration
description: Connect your multiplayer games with TikTok Live for interactive streaming experiences.
---


## Installation

```bash
npm install PlayroomKit
```

## Basic Setup

### JavaScript

```javascript
import { insertCoin, onPlayerJoin, setState, getState } from 'PlayroomKit';

// Initialize with TikTok Live integration
await insertCoin({
  streamMode: {
    enabled: true,
    platform: 'tiktok'
  }
});

// Handle TikTok Live viewers joining
onPlayerJoin((player) => {
  if (player.isTikTokViewer) {
    console.log(`TikTok viewer ${player.name} joined!`);
  }
});
```

### React Setup

```jsx
import { usePlayroom, usePlayerList } from 'PlayroomKit/react';

function TikTokLiveGame() {
  const { insertCoin, setState, getState } = usePlayroom();
  const players = usePlayerList();

  useEffect(() => {
    insertCoin({
      streamMode: {
        enabled: true,
        platform: 'tiktok'
      }
    });
  }, []);

  const tiktokViewers = players.filter(p => p.isTikTokViewer);

  return (
    <div>
      <h2>TikTok Live Game</h2>
      <p>TikTok Viewers: {tiktokViewers.length}</p>
    </div>
  );
}
```

## Viewer Participation

### Live Reactions

```javascript
// Handle TikTok Live reactions
onPlayerJoin((player) => {
  if (player.isTikTokViewer) {
    // Track viewer reactions
    player.onReaction = (reaction) => {
      const currentState = getState();
      setState({
        ...currentState,
        reactions: [...(currentState.reactions || []), {
          type: reaction.type,
          player: player.name,
          timestamp: Date.now()
        }]
      });
    };
  }
});
```

### Viewer Voting

```javascript
// Enable viewer voting
function startVoting(question, options) {
  setState({
    voting: {
      active: true,
      question,
      options,
      votes: {}
    }
  });
}

// Handle TikTok viewer votes
onPlayerJoin((player) => {
  if (player.isTikTokViewer) {
    player.onVote = (optionIndex) => {
      const currentState = getState();
      const votes = currentState.voting.votes;
      votes[player.id] = optionIndex;
      
      setState({
        ...currentState,
        voting: {
          ...currentState.voting,
          votes
        }
      });
    };
  }
});
```

## Stream Overlay

### Game Information Display

```jsx
function TikTokOverlay() {
  const gameState = getState();
  
  return (
    <div className="tiktok-overlay">
      <div className="game-stats">
        <h3>Live Game Stats</h3>
        <p>Players: {gameState.playerCount}</p>
        <p>Score: {gameState.score}</p>
        <p>Level: {gameState.level}</p>
      </div>
      
      <div className="viewer-count">
        <p>TikTok Viewers: {gameState.tiktokViewers}</p>
      </div>
    </div>
  );
}
```

### Live Chat Integration

```javascript
// Display TikTok Live comments in game
function handleTikTokComments() {
  onPlayerJoin((player) => {
    if (player.isTikTokViewer) {
      player.onComment = (comment) => {
        const currentState = getState();
        setState({
          ...currentState,
          liveComments: [...(currentState.liveComments || []), {
            text: comment.text,
            player: player.name,
            timestamp: Date.now()
          }].slice(-10) // Keep last 10 comments
        });
      };
    }
  });
}
```

## Analytics and Insights

### Viewer Engagement Tracking

```javascript
// Track TikTok viewer engagement
function trackEngagement() {
  const analytics = {
    totalViewers: 0,
    activeParticipants: 0,
    averageSessionTime: 0,
    popularActions: {}
  };

  onPlayerJoin((player) => {
    if (player.isTikTokViewer) {
      analytics.totalViewers++;
      
      // Track participant actions
      player.onAction = (action) => {
        analytics.activeParticipants++;
        analytics.popularActions[action] = 
          (analytics.popularActions[action] || 0) + 1;
      };
    }
  });

  return analytics;
}
```

### Real-time Metrics

```jsx
function TikTokMetrics() {
  const [metrics, setMetrics] = useState({});

  useEffect(() => {
    const interval = setInterval(() => {
      const currentState = getState();
      setMetrics({
        viewers: currentState.tiktokViewers || 0,
        reactions: currentState.reactions?.length || 0,
        comments: currentState.liveComments?.length || 0,
        votes: Object.keys(currentState.voting?.votes || {}).length
      });
    }, 1000);

    return () => clearInterval(interval);
  }, []);

  return (
    <div className="metrics-panel">
      <h3>TikTok Live Metrics</h3>
      <div>Viewers: {metrics.viewers}</div>
      <div>Reactions: {metrics.reactions}</div>
      <div>Comments: {metrics.comments}</div>
      <div>Votes: {metrics.votes}</div>
    </div>
  );
}
```

## Best Practices

### Performance Optimization

- Limit the frequency of state updates to avoid overwhelming viewers
- Use batch updates for multiple viewer actions
- Implement viewer action throttling

```javascript
// Throttle viewer actions
const throttledActions = new Map();

function throttleViewerAction(playerId, action, delay = 1000) {
  const lastAction = throttledActions.get(playerId);
  const now = Date.now();
  
  if (!lastAction || now - lastAction > delay) {
    throttledActions.set(playerId, now);
    return true;
  }
  return false;
}
```

### Security Considerations

- Validate all viewer inputs
- Implement rate limiting for viewer actions
- Monitor for spam and inappropriate content

```javascript
// Input validation for TikTok viewers
function validateViewerInput(input) {
  // Check for appropriate content
  const forbidden = ['spam', 'inappropriate'];
  return !forbidden.some(word => input.toLowerCase().includes(word));
}
```

## Troubleshooting

### Common Issues

1. **Viewers not connecting**: Ensure TikTok Live integration is properly configured
2. **High latency**: Implement efficient state management and reduce update frequency
3. **Viewer actions not registering**: Check event handlers and validation logic

### Debug Mode

```javascript
// Enable debug mode for TikTok Live
await insertCoin({
  streamMode: {
    enabled: true,
    platform: 'tiktok',
    debug: true
  }
});
```

Based on PlayroomKit's streaming integration capabilities and TikTok Live best practices.
